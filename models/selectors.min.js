/*
 * selectors.js CSS3 Selectors Model v1.2.2
 *
 * Copyright 2011, Dmitriy Pakhtinov ( spb.piksel@gmail.com )
 *
 * http://spb-piksel.ru/
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Update: 22-04-2012
 */
(function(A,B){var k=/\s*(?:(\*|(?:(?:\*|[\w\-]+)\|)?(?:[\w\-]+|\*)))?(?:\[\s*(?:((?:[\w\-]+\|)?[\w\-]+)\s*((?:~|\^|\$|\*|\||!)?=)\s*)?((?:".*?(?:(?:[\\]{2}(?="))|[^\\])"|'.*?(?:(?:[\\]{2}(?='))|[^\\])'|[^\]].*?)?)\s*\])?(?:(\.|#)([\w\-]+))?(?:(:(?::)?)([\w\-]+)(?:\(\s*([^)]+)\s*\))?)?(?:(?:\s*(?=\s))?(?:(?:\s(?=,|>|\+|~))?([\s,>+~](?!$)))?)?/g,H=!0,w=!1,x=A.Element,t=A.document,D=t.documentElement,I=x&&x.prototype.getElementsByClassName,F=Array.prototype.slice,O=Array.prototype.splice,G=Array.prototype.push,
p=A.spike||{},E=function(){var a=t.createElement("div");a.innerHTML="<p class='TEST'></p>";return!a.querySelectorAll||0===a.querySelectorAll(".TEST").length?!1:[x.prototype.querySelectorAll,t.querySelectorAll]}(),K=function(){var a=!0,b=t.createElement("div");b.appendChild(t.createComment(""));try{F.call(D.childNodes,0)}catch(d){a=!1}if(0<b.getElementsByTagName("*").length||!a)return b=null,function(d,c,b,k){if(!b&&a)G.apply(c,F.call(d,0));else if(!b&&k)G.apply(c,d);else{b=0;for(k=c.length;d[b];b++)1===
d[b].nodeType&&(c[k++]=d[b]);k===c.length||(c.length=k)}return c};b=null;return function(a,d){G.apply(d,F.call(a,0));return d}}(),P=function(){[0,0].sort(function(){H=!1;return 0});return D.compareDocumentPosition?function(a,b){if(a==b)return w=!0,0;if(D.compareDocumentPosition)return!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:a===b?0:1}:"sourceIndex"in D?function(a,b){return a==b?(w=!0,0):!a.sourceIndex||!b.sourceIndex?a.sourceIndex?
-1:1:a.sourceIndex-b.sourceIndex}:t.createRange?function(a,b){if(a==b)return w=!0,0;if(!a.ownerDocument||!b.ownerDocument)return a.ownerDocument?-1:1;var d=a.ownerDocument.createRange(),l=b.ownerDocument.createRange();d.setStart(a,0);d.setEnd(a,0);l.setStart(b,0);l.setEnd(b,0);return d.compareBoundaryPoints(Range.START_TO_END,l)}:function(a,b){a==b&&(w=!0);return 0}}(),Q={"class":"className","for":"htmlFor"},L={href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")},
style:function(a){var b=a.getAttribute("style");return"object"===typeof b?a.style.cssText||"":b}};p.filters=function(){function a(a,b,c){a=c-b[1];return 0===b[0]?0===a:0===a%b[0]&&0<=a/b[0]}var b={":":{"nth-child":function(d,b){return a(d,b,d.nodeIndex||1)},"nth-last-child":function(d,b){var c=d.parentNode;return a(d,b,(c&&(c._qsaCE||c.children.length||0)+1||2)-(d.nodeIndex||1))},"first-child":function(a){a=a.previousSibling;return!(a&&(3===a.nodeType?a.previousSibling:1))},"last-child":function(a){a=
a.nextSibling;return!(a&&(3===a.nodeType?a.nextSibling:1))},empty:function(a){return!a.firstChild},enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},not:function(a,b,c,g){return(!g[1]||g[1]&&a.nodeName===g[1])&&0<C(g,[a],[]).length?!1:!0},contains:function(a,b){return 0<=(a.textContent||a.innerText||a.nodeValue||a.value||"").indexOf(b)}},"::":{}};b[":"]["only-child"]=function(a){return b[":"]["first-child"](a)&&
b[":"]["last-child"](a)};return b}();p.preFilters=function(){var a={"nth-child":function(a){var d=a[9].replace(/^\+|\s*/g,""),d=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===d&&"2n"||"odd"===d&&"2n+1"||!/\D/.test(d)&&"0n+"+d||d);a[9]=[d[1]+(d[2]||1)-0,d[3]-0];return!(1===a[9][0]&&0===a[9][1])}};a["nth-last-child"]=a["nth-child"];return a}();var C=function(a,b,d,l){var c,g,t=b.length,r,m,j=!1,s,u,f,e=0,v,h;!a[2]&&a[4]?(a[2]=a[4],a[4]=B):a[4]&&(a[4]=a[4].replace(/^(?:"(.*)"|'(.*)')$/,"$1$2").replace(/\\/g,
""));r=Q[a[2]]||a[2];s="."===a[5]?1:"#"===a[5]?2:!1;m=a[6];u=p.filters[a[7]]&&p.filters[a[7]][a[8]]||a[8]&&p.error(a[8])||!1;if(!r&&!s&&!u&&t)K(b,d,!l,b instanceof Array);else{u&&a[9]&&(k.lastIndex=0,f=k.exec(a[9]),f[1]=f[1]&&"*"!==f[1]?f[1].replace("|",":").toUpperCase():B,p.preFilters[a[8]]&&(j=p.preFilters[a[8]](a)));c=d.length;for(l=0;l<t;l++)if(g=b[l],1===g.nodeType){if(e=r){var i=a;h=g;e=r;e=L[e]?L[e](h):null!=h[e]?h[e]:h.getAttribute(e);h=i[3];var i=i[4],q=e+"",e=!(null==e?"!="===h:"="===h?
q===i:"*="===h?0<=q.indexOf(i):"~="===h?0<=(" "+q+" ").indexOf(" "+i+" "):!i?q&&!1!==e:"!="===h?q!==i:"^="===h?0===q.indexOf(i):"$="===h?q.substr(q.length-i.length)===i:"|="===h&&(q===i||q.substr(0,i.length+1)===i+"-"))}e&&(g=null);if(g&&s)if(1===s){if(!g.className||!(0<=(" "+g.className+" ").indexOf(" "+m+" ")))g=null}else 2===s&&g.id!==m&&(g=null);if(g&&u){if(j&&(v=g.parentNode)&&(!g.nodeIndex||v._qsaCL!==v.children.length)){e=0;for(h=v.firstChild;h;h=h.nextSibling)1===h.nodeType&&(h.nodeIndex=
++e);v._qsaCE=e;v._qsaCL=v.children.length}u(g,a[9],a,f)||(g=null)}g&&(d[c++]=g)}c===d.length||(d.length=c)}return d},M=function(a,b,d,l){var c,g,J,r,m,j,s,u=a.length,f,e,v=!0,h,i=[],q=[],x,w,z=d[0],A=k.lastIndex,n,y,o;g=0;for(J=b.length;g<J;g++){w=b[g];o=A;do{k.lastIndex=o;c=k.exec(a);(x=!c[4]&&!c[5]&&!c[7])&&!c[1]&&p.error(a.substring(o));o=k.lastIndex;n=c[1]&&"*"!==c[1]?c[1].replace("|",":"):B;h=c[10];if(x&&!0===v&&("~"===h||">"===h))q.push({tag:n?n.toUpperCase():n,rule:h}),h=!0,f=[];else if(">"===
v){f=[];y=n?n.toUpperCase():n;for(r=0;e=i[r];r++){e=e.children;for(j=0;m=e[j];j++)1===m.nodeType&&(y?y===m.nodeName&&(f[f.length]=m):f[f.length]=m)}d[1]=!0}else if("+"===v||"~"===v){f=[];r=0;for(m=i.length;r<m;r++){y=n?n.toUpperCase():n;for(e=i[r];(e=e.nextSibling)&&!(1===e.nodeType&&(y?y===e.nodeName&&(f[f.length]=e):f[f.length]=e,"+"===v)););}d[1]=!0}else if("#"===c[5]&&!(s=!1)||"id"===c[2]&&"="===c[3]&&(s=!0)){s&&(c[6]=c[4].replace(/^(?:"(.*)"|'(.*)')$/,"$1$2").replace(/\\/g,""),c[2]=c[3]=c[4]=
B);f=[];j=c[6];if(w===t){i=[];y=n?n.toUpperCase():n;do if(m=t.getElementById(j))i[i.length]=m,m.setAttribute("id",j+" _");while(m);for(s=0;e=i[s];s++)if(e.setAttribute("id",j),!y||e.nodeName===y)f[f.length]=e}else{i=w.getElementsByTagName(n||"*");for(s=0;e=i[s];s++)e.id&&e.id===j&&(f[f.length]=e)}c[5]=B}else"."===c[5]&&!n&&I?(f=I.call(w,c[6]),x=!c[4]&&!c[7]&&(","===h||o===u),c[5]=B):f=w.getElementsByTagName(n||"*");if(x)i=f,0==q.length&&f.length&&(","===h||o===u)&&K(f,z,!n,f instanceof Array);else if(i=
0<f.length?0==q.length&&(","===h||o===u)?C(c,f,z,n):C(c,f,[],n):[],!h&&o<u){m=i.length;do if(k.lastIndex=o,c=k.exec(a),o=k.lastIndex,h=c[10],m&&(i=0==q.length&&(","===h||o===u)?C(c,i,z,n):C(c,i,[],n),m=i.length),h)break;while(o<u)}if(!0!==h&&0<q.length)if(0===i.length)q.length=0;else{f=[];for(j=0;e=i[j];)f[j++]=e;for(r=z.length;c=q.pop();)if(m=q.length,">"===c.rule)for(j=0;e=f[j];j++)e.parentNode&&(!c.tag||e.parentNode.nodeName===c.tag)?0===m?","===h||o===u?z[r++]=i[j]:f[j]=i[j]:f[j]=e.parentNode:
f[j]=!0;else for(j=0;e=f[j];j++){e=e.previousSibling;for(s=!1;e;){if(1===e.nodeType&&(!c.tag||e.nodeName===c.tag)){0===m?","===h||o===u?z[r++]=i[j]:f[j]=i[j]:f[j]=e;s=!0;break}e=e.previousSibling}s||(f[j]=!0)}r===z.length||(z.length=r);if(!(","===h||o===u)){i=[];for(j=0;e=f[j];j++)!0!==e&&i.push(e)}}if(" "===h)if(0<i.length)k.lastIndex=o,d=M(a,i,d,!0),o=k.lastIndex,d[1]=!0;else{k.lastIndex=o;do if(c=k.exec(a),!c[4]&&!c[5]&&!c[7]&&!c[1]&&p.error(a.substring(o)),","===c[10])break;while(k.lastIndex<
u);o=k.lastIndex;h=c[10]}if(","===h&&(d[1]=!0,l))break;v=h}while(o<u)}return d};p.querySelectorAll=function(a,b){b=b&&b.nodeType?b:t;k.lastIndex=0;var d;d=!0;var l;if(E){var c,g,p;g=/^\s*[>+~]/.test(a);if(9===b.nodeType)try{l=E[1].call(b,a),d=!1}catch(r){}else if(1===b.nodeType&&"OBJECT"!==b.nodeName)if(g&&(c=b.parentNode)){p=(g=b.getAttribute("id"))&&g.replace(/'/g,"\\$&")||"__qsaEngine__";!g&&b.setAttribute("id",p);try{l=E[0].call(c,"[id='"+p+"'] "+a),d=!1}catch(m){}!g&&b.removeAttribute("id")}else if(!g)try{l=
E[0].call(b,a),d=!1}catch(j){}}if(d&&(d=M(a,[b],[[],0]),l=d[0],d[1]&&1<l.length&&(w=H,Array.prototype.sort.call(l,P),w)))for(d=1;d<l.length;d++)l[d]===l[d-1]&&(O.call(l,d--,1),delete l[l.length]);return l};p.error=function(a){throw Error("Syntax error: "+a);};A.spike=p;var N=eval("/*@cc_on @_jscript_version;@*/");N&&5.8>=N&&x&&(t.querySelectorAll=x.prototype.querySelectorAll=function(a){if(this===t)return p.querySelectorAll(a,this);var b;k.lastIndex=0;do if(b=k.exec(a),!b[10]||" "===b[10])if((!b[1]||
b[1]&&this.nodeName===b[1].toUpperCase())&&0<C(b,[this],[]).length){if(" "===b[10]){a=a.substr(k.lastIndex,a.length-k.lastIndex);break}}else break;else break;while(k.lastIndex<a.length);return p.querySelectorAll(a,this)},t.querySelector=x.prototype.querySelector=function(a){return t.querySelectorAll.call(this,a)[0]||null},t.getElementsByClassName=x.prototype.getElementsByClassName=function(a){for(var b=[],d,k=0,c,g,p=this.getElementsByTagName("*"),a=a.replace(/^[\s]+|[\s](?=\s)|[\s]+$/g,"").split(" ");g=
p[k++];){for(d=a.length;c=a[--d];)if(!g.className||-1===(" "+g.className+" ").indexOf(" "+c+" ")){g=null;break}g&&(b[b.length]=g)}return b})})(window);
